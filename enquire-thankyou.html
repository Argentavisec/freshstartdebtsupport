window.addEventListener('DOMContentLoaded', () => {
  const params = new URLSearchParams(window.location.search);
  const data = {
    debt: params.get('debt') || '',
    employment: params.get('employment') || '',
    name: params.get('name') || '',
    contact: params.get('contact') || ''
  };

  console.log("URL Params:", window.location.search);
  console.log("Parsed Data:", data);  // Add this for debugging
  console.log("📤 Sending to Google Sheets:", data);

  fetch("https://script.google.com/macros/s/AKfycbxOgHOwAG9ZnIzKLFopiAmXPsM7oRcjAnXX-FRJGyXJn6OJsk1NcOHJVMLXqUn7q6vr/exec", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
  .then(res => res.text())
  .then(text => console.log("✅ Google Sheets Response:", text))
  .catch(err => console.error("❌ Google Sheets Error:", err));
});
